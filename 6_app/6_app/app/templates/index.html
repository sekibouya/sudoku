<!DOCTYPE html>
<html>
    <head>
        <title>数独</title>
        <meta charset="utf-8">
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
        <style>
            body {
                padding: 20px;
                font-family: 'Noto Sans JP', sans-serif;
            }
            table {
                border-collapse: collapse;
                margin-bottom: 20px;
            }
            td {
                border: 1px solid #ccc;
                width: 40px;
                height: 40px;
                text-align: center;
                font-size: 1.2em;
            }

            tr:nth-child(3n) td {
                border-bottom: 2px solid #000;
            }
            tr:nth-child(3n+1) td {
                border-top: 2px solid #000;
            }
            td:nth-child(3n) {
                border-right: 2px solid #000;
            }
            td:nth-child(3n+1) {
                border-left: 2px solid #000;
            }
            .controls a, .controls input {
                margin-right: 10px;
            }
            .message {
                min-height: 24px; 
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1 class="mb-4">数独</h1>

            <!-- メッセージ表示エリア -->
            <h2 class="message text-info">{{ text }}</h2>

            <form action="/change" method="post">
                <table>
                    <tbody>
                        <!-- 外側のループ（行） -->
                        {% for row_data in question %}
                            {% set row_index = loop.index0 %} 
                            <tr>
                            <!-- 内側のループ（列） -->
                            {% for figure in row_data %}
                                <td>
                                    {% if figure == 0 %}
                                        <!-- 座標を、2桁の数字の文字列として扱う。 -->
                                        <input type="radio" name="place" value="{{ row_index }}{{ loop.index0 }}">
                                    {% else %}
                                        {{ figure }}
                                    {% endif %}
                                </td>
                            {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <h2>挿入する数字</h2>
                <div class="mb-3">
                    {% for i in range(1, 10) %}
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="number" id="num{{ i }}" value="{{ i }}">
                            <label class="form-check-label" for="num{{ i }}">{{ i }}</label>
                        </div>
                    {% endfor %}
                </div>

                <div class="controls mt-4">
                    <input type="submit" value="入力" class="btn btn-primary">
                    <a href="/undo" class="btn btn-secondary">Undo</a>
                    <a href="/redo" class="btn btn-secondary">Redo</a>
                    <a href="/reset" class="btn btn-danger">Reset</a>
                    <a href="/answer" class="btn btn-dark">answer</a>
                </div>

                <h2 class="message text-info">問題レベルの選択</h2>
                <div class="controls mt-4">
                    {% for i in range(number_of_level) %}
                        <a href="/level{{i+1}}" class="btn btn-secondary">Level{{ i+1 }}</a>
                    {% endfor %}
                </div>

            </form>
        </div>
    </body>
</html>